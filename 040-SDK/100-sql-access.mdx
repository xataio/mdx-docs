---
title: SQL access
description: How to access Xata using SQL directly
keywords: ['sql', 'access', 'rest']
slug: sdk/sql/overview
published: false
---

Xata uses PostgreSQL under the hood to store your data. You can use SQL to work with your data. The results come back in a typical Xata JSON response mechanism over HTTP. If the [Xata API]() doesn't cover the query you need, you can use SQL directly to do queries, insert data, update information, and delete records.

Xata offers support for a subset of PostgreSQL functions. This includes functions such as subquery, comparison, aggregate, window, range, json, string, datetime, and array functions. Functions beyond these are not permitted.

## Data model

Database tables are stored in PostgreSQL as tables. Xata data types are mapped to PostgreSQL types with additional constraints.

| Xata data type | PostgreSQL data type | Notes |
| ------------- | -------------------   | ----- |
| string        | text                  |       |
| text          | text                  | With constraints on maximum length |
| int           | bigint                |       |
| float         | double precision      |       |
| datetime      | timestamptz           |       |
| bool          | boolean               |       |
| email         | text                  | Validated by Xata |
| multiple      | text[]                | Validated by Xata |
| file          | jsonb                 | Validated by Xata |
| filearray     | jsonb                 | Validated by Xata |
| link          | foreign key           |       |

Database tables are stored in PostgreSQL. Linked columns are foreign
keys pointing to the linked table. If you want to access a linked
column, use JOINs or WHERE conditions to find the corresponding
records. 

Example: 

```sql
SELECT "Users".email, address.city FROM "Users"
LEFT JOIN address ON "Users".id=address.id;
```

Other special Xata datatypes like `email` require you to insert it
using the Xata API or SDK, otherwise Xata cannot check if the data
inserted is valid or not. Thus, we suggest you do not write such
column directly. Instead use the API we provide.

### Table and column names

Please note when you are working with names that include upper-case
letters like `Users` or `zipCode`, you must quote those
otherwise PostgreSQL treats it as a lowercase name.

## Endpoint

URL: `https://{workspace}.{region}.xata.sh/db/{db}:{branch}/sql`

Method: `POST`

Parameters:
* `statement`: your SQL statement (required).
* `params`: list of parameters when submitting a parameterized statement.
* `consistency`: consistency when executing a statement. Available options: `strong`, `eventual`. Default: `strong`.

## Examples

### Fetch all records

<TabbedCode tabs={['TypeScript', 'Python', 'JSON']}>

```ts
const { records: myRecord } = await xata.sql<TeamsRecord>`SELECT * FROM teams`;
```

```python
records = xata.sql().query("SELECT * FROM \"teams\"")
```

```jsonc
// POST https://{workspace}.{region}.xata.sh/db/{db}:{branch}/sql

{
  "statement": "SELECT * FROM \"teams\""
}
```

</TabbedCode>

The following response is returned:

```json
{
  "records": [
    {
      "id": "rec_c8hng2h26un90p8sr7k0",
      "name": "Matrix",
      "owner": {
        "id": "myid"
      },
      "xata": {
        "version": 0,
        "createdAt": "2023-05-15T08:21:31.96526+01:00",
        "updatedAt": "2023-05-15T21:58:54.072595+01:00"
      }
    }
  ]
}
```

### Select a subset of columns from your table

<TabbedCode tabs={['TypeScript', 'Python', 'JSON']}>

```ts
const { records: myRecord } = await xata.sql<TeamsRecord>`SELECT name, city FROM "Users"`;
```

```python
records = xata.sql().query("SELECT name, city FROM \"Users\"")
```

```jsonc
// POST https://{workspace}.{region}.xata.sh/db/{db}:{branch}/sql

{
  "statement": "SELECT name, city FROM \"Users\""
}
```

</TabbedCode>

Response:

```json
{
  "records": [
    {
      "city": "New York",
      "name": "Keanu Reaves"
    }
  ]
}
```

### Insert a new record using a parameterized query

<TabbedCode tabs={['TypeScript', 'Python', 'JSON']}>
```ts
const { records: myRecord } = await xata.sql<TeamsRecord>`INSERT INTO "Users" (name, email) VALUES ($1, $2)`;
```
```python
records = xata.sql().query(
  "INSERT INTO \"Users\" (name, email) VALUES ($1, $2)",
  ["Keanu Reeves", "keanu@example.com"]
)
```
```jsonc
// POST https://{workspace}.{region}.xata.sh/db/{db}:{branch}/sql

{
  "statement": "INSERT INTO \"Users\" (name, email) VALUES ($1, $2)",
  "params": ["Keanu Reeves", "keanu@example.com"]
}
```
</TabbedCode>

### Delete record using a parameterized query

```jsonc
// POST https://{workspace}.{region}.xata.sh/db/{db}:{branch}/sql

{
  "statement": "DELETE FROM  \"Users\" WHERE id=$1",
  "params": ["my-record-id"]
}
```


## Limitations

* `xata.*` internal fields are read-only.
* You can only submit one statement per request.
* Xata returns 1000 records at a time. Please access your data using `LIMIT` and `OFFSET` keywords to iterate over your data.
* JSON formatter functions do not work as the endpoint already returns a JSON response.


Columns with the same name are overwritten by default. If you have multiple columns with the same name please use aliasing to rename at least one of them. For example: 
```sql
SELECT address AS physical_address, address AS email 
FROM people, emails 
WHERE people.id=emails.id;
```


Xata does not support:
* DDL commands like CREATE, DROP, ALTER and TRUNCATE.
* DCL commands like GRANT or REVOKE.
* TCL commands like COMMIT, ROLLBACK, SAVEPOINT, etc.
